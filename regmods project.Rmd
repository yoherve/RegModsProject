---
fontsize: 10pt
geometry: margin=.75in
output: pdf_document
---

# THE IMPACT OF TRANSMISSION TYPES ON FUEL ECONOMY

## Coursera Regression Models Project   

(NOTE: The .Rmd file used to create this PDF can be found at https://github.com/yoherve/RegModsProject.git)   

#### EXECUTIVE SUMMARY
This report examines the relationship between fuel efficiencey and automobile transmission types, and specifically addresses the questions as to whether automatic or manual transmissions generate more miles per gallon (MPG) and quantifies any MPG differences. On average, with other factors held constant, cars with manual transmissions yield 1.8 more MPG than cars with automatic transmissions. Transmission type significantly impacts MPG, but a more accurate predictive model also includes vehicle weight, horsepower and number of cylinders.

#### EXPLORATORY DATA ANALYSIS
The data for this analysis comes from the **mtcars** data set which is based on a 1974 Motor Trend US magazine study and comprises fuel consumption and 10 aspects of automobile design and performance for 32 automobiles (1973-1974 model years). The **mtcars** data set contains the following variables:

* mpg - Miles/(US) gallon
* cyl - Number of cylinders
* disp - Displacement (cu. in.)
* hp - Gross horsepower
* drat - Rear axle ratio
* wt - Weight (lb/1000)
* qsec - 1/4 mile time
* vs - V/S
* am - Transmission (0 = automatic, 1 = manual)
* gear - Number of forward gears
* carb - Number of carburetors

Let's begin by converting **mtcars** variables to factors as necessary (NOTE: Choosing not to convert certain variables to factors may generate different analysis results.):

```{r}
data("mtcars")
mtcars$cyl <- factor(mtcars$cyl)
mtcars$vs <- factor(mtcars$vs)
mtcars$gear <- factor(mtcars$gear)
mtcars$am <- factor(mtcars$am, labels = c("Automatic", "Manual"))
mtcars$carb <- factor(mtcars$carb)
```

#### MODEL FITTING AND SELECTION

We'll use R's step() function to find the best model:

```{r results = "hide"}
all_model <- lm(mpg ~ ., data = mtcars)
step_model <- step(all_model, direction = "both")
```

```{r}
summary(step_model)
```

With an AIC of 61.65 and an adjusted R-squared value of .8401, the model which includes Cylinders, Horsepower, Weight and Transmission appears to be the best predictor of MPG. This model also generates a p-value of 1.506e-10, allowing us to reject the null hypothesis - the included variables do indeed significantly influence MPG rates.

Let's also check the best model from the step() function with the simple model which only includes Transmission as a predictor for MPG:

```{r}
simple_model <- lm(mpg ~ am, data = mtcars)
anova(simple_model, step_model)
```

The p-value of 1.688e-08 allows us to reject the null hypothesis - the best model generated by the step() function is significantly better than the simple model.

#### CONCLUSION

Transmission type significantly impacts MPG, but a more accurate predictive model also includes vehicle weight, horsepower and number of cylinders. Transmission type alone accounts for about 34% of variation in MPG, while the addition of weight, horsepower and cylinders increases the portion of variability accounted for to 84%.

MPG increases by 1.8 for cars with manual vs automatic transmissions.
MPG decreases by 2.5 for every one ton increase in vehicle weight.
MPG decreases by 3 and 2.2 as the number of cylinders increases from 4 to 6 to 8, respectively.
MPG decreases by a small amount as vehicle horsepower increases.

\pagebreak

#### APPENDIX

### Figure 1 - MPG by Transmission Type
   
```{r echo=FALSE}
boxplot(mpg ~ am, data = mtcars, col = c("red", "green"), ylab = "MPG")
```

---

### Figure 2 - MPG vs All Variables  

```{r message=FALSE, echo=FALSE}
library(tidyr)
library(dplyr)
library(ggplot2)
```

```{r echo=FALSE, warning=FALSE}
mtcars$model <- row.names(mtcars)
mtc_long <- gather(mtcars, variable, value, cyl:carb)

ggplot(mtc_long, aes(x = value, y = mpg)) +
  geom_point(size = .9) + 
  geom_smooth(method = "lm", aes(group = 1)) +
  facet_wrap(~variable, scales = "free", ncol = 5) +
  theme(axis.text.x = element_blank())
```

### Figure 3 - Pairs Plot for Variables Included in Best Model  

```{r echo=FALSE}
bmvars <- mtcars[, c(1, 9, 6, 2, 4)]
pairs(bmvars, panel = panel.smooth, col = 9, pch=".")
```

---

### Figure 4 - Residuals Plots  

```{r echo=FALSE}
par(mfrow = c(2, 2))
plot(step_model, cex=.2)
```